<script type="text/javascript">
  $(document).ready(function() {
    
    // expanding search bar
    var expandingSearchIcon = $('#expanding-search-icon');
    var expandingSearch     = $('.expanding-search')
    
    expandingSearchIcon.click(function() {
      expandingSearch.addClass('expanding-search-open')
    });
  });
</script>

<div class="navbar">
  <%= link_to "dealership.com", root_path, id: "logo" %>
  
  <%= form_tag search_path, method: :get do %>
    <div class="row expanding-search" id="expanding-search">
      <div class="col-md-9">
        <i class="fa fa-search fa-lg expanding-search-icon" aria-hidden="true"></i>
        <%= text_field_tag :search, 
            params[:search],
            placeholder: "Search by vehicle, dealership, or city", 
            class: "form-control" %>
      </div>
      <div class="col-md-3">
        <%= submit_tag "Search", class: "btn btn-primary" %>
      </div>
    </div>
  <% end %>
  
  <!--<form class="searchbox">-->
  <!--  <input type="search" placeholder="Search......" name="search" class="searchbox-input" onkeyup="buttonUp();" required>-->
  <!--  <input type="submit" class="searchbox-submit" value="GO">-->
  <!--  <span class="searchbox-icon">-->
  <!--    <i class="fa fa-search" aria-hidden="true"></i>    -->
  <!--  </span>-->
  <!--</form>-->
  
  <nav>
    <ul class="nav navbar-nav">
      <% if logged_in? %>
        <li class="dropdown">
          <a href='#' class="dropdown-toggle" data-toggle="dropdown">
             Help <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><%= link_to "How It Works", help_path %></li>
            <li><%= link_to "Help Center",  help_path %></li>
            <li><%= link_to "Contact Us",   contact_path %></li>
          </ul>
        </li>
        <li><%= link_to "Messages",        '#' %></li>
        <li class="dropdown">
          <a href='#' class="dropdown-toggle" data-toggle="dropdown">
            <%= current_user.name %><b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><%= link_to "Profile",  current_user %></li>
            <li><%= link_to "Settings", edit_user_path(current_user) %></li>
            <li class="divider"></li>
            <li>
              <%= link_to "Log Out", logout_path, method: "delete" %></li>
          </ul>
        </li>
      <% else %>
        <li>
          <i class="fa fa-search fa-lg header-icon" aria-hidden="true"></i>
        </li>
        <li class="dropdown">
          <a href='#' class="dropdown-toggle" data-toggle="dropdown">
             Help <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><%= link_to "How It Works", help_path %></li>
            <li><%= link_to "Help Center",  help_path %></li>
            <li><%= link_to "Contact Us",   contact_path %></li>
          </ul>
        </li>
        <li><%= link_to "Sign Up", signup_path %></li>
        <li><%= link_to "Log In",  login_path %></li>
        <li><%= link_to "Sell",    vehicles_path %></li>
      <% end %>
    </ul>
  </nav>
</div>

 <!--$(document).ready(function(){-->
 <!-- var submitIcon = $('.fa-search');-->
 <!-- var inputBox = $('.searchbox-input');-->
 <!-- var searchBox = $('.searchbox');-->
 <!-- var isOpen = false;-->
 <!-- submitIcon.click(function(){-->
 <!--  if(isOpen == false){-->
 <!--   searchBox.addClass('searchbox-open');-->
 <!--   inputBox.focus();-->
 <!--   isOpen = true;-->
 <!--  } else {-->
 <!--   searchBox.removeClass('searchbox-open');-->
 <!--   inputBox.focusout();-->
 <!--   isOpen = false;-->
 <!--  }-->
 <!-- }); -->
 <!--});-->

 
 <!--http://thecodeblock.com/expanding-search-bar-with-jquery-tutroial/-->
 

<!--<script>-->
<!--  $(document).ready(function(){-->
<!--            var submitIcon = $('.searchbox-icon');-->
<!--            var inputBox = $('.searchbox-input');-->
<!--            var searchBox = $('.searchbox');-->
<!--            var isOpen = false;-->
<!--            submitIcon.click(function(){-->
<!--                if(isOpen == false){-->
<!--                    searchBox.addClass('searchbox-open');-->
<!--                    inputBox.focus();-->
<!--                    isOpen = true;-->
<!--                } else {-->
<!--                    searchBox.removeClass('searchbox-open');-->
<!--                    inputBox.focusout();-->
<!--                    isOpen = false;-->
<!--                }-->
<!--            });  -->
<!--             submitIcon.mouseup(function(){-->
<!--                    return false;-->
<!--                });-->
<!--            searchBox.mouseup(function(){-->
<!--                    return false;-->
<!--                });-->
<!--            $(document).mouseup(function(){-->
<!--                    if(isOpen == true){-->
<!--                        $('.searchbox-icon').css('display','block');-->
<!--                        submitIcon.click();-->
<!--                    }-->
<!--                });-->
<!--        });-->
<!--            function buttonUp(){-->
<!--                var inputVal = $('.searchbox-input').val();-->
<!--                inputVal = $.trim(inputVal).length;-->
<!--                if( inputVal !== 0){-->
<!--                    $('.searchbox-icon').css('display','none');-->
<!--                } else {-->
<!--                    $('.searchbox-input').val('');-->
<!--                    $('.searchbox-icon').css('display','block');-->
<!--                }-->
<!--            }-->
<!--</script>-->

<!--http://callmenick.com/post/expanding-search-bar-using-css-transitions-->
<!--https://codepen.io/nikhil/pen/qcyGF-->