<% provide(:title, "Personalized Search") %>

<header class="header-static-gray">
  <%= render 'layouts/header_secondary' %>
</header>

<%= render 'layouts/modal_search' %>

<%= render 'layouts/modal_menu' %>

<%= render 'layouts/contact' %>

<div class="search-parameter">
  
  <h1 class="search-parameter-title">What are you looking to pay?</h1>
  
  <div class="search-parameter-form">
    <%= form_for [current_user, @personalized_search],
                 url: user_personalized_search_path(current_user) do |f| %>

      <div class="form-group form-group-search-parameter">
        
        <%= label_tag :price, "Max Price" %>
        
        <%= f.text_field :price, 
                           placeholder: "Email address", 
                           class: 'form-control form-control-primary' %>
        
        <!--<span id="personalized_price_slider_val" class="slider-label">-->
        <!--  $200000-->
        <!--</span>-->
        
        <!--<(perc)= text_field_tag :price, -->
        <!--                   nil,-->
        <!--                   id: 'personalized_price_slider', -->
        <!--                   type: 'text',-->
        <!--                   data: { 'slider-min'   => '0',-->
        <!--                           'slider-max'   => '200000',-->
        <!--                           'slider-step'  => '1',-->
        <!--                           'slider-value' => '200000' } %>-->
      </div>
      
      <%= hidden_field_tag :redirect_location, 
                           mileage_user_personalized_search_path %>
    
      <%= button_tag(type: 'submit', class: "btn btn-primary") do %>
        
        Next
        
        <i class="fa fa-arrow-right search-parameter-next"></i>
      <% end %>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  
  // sliders
    
    var priceSlider         = $('#personalized_price_slider');
    var priceSliderValue    = $('#personalized_price_slider_val');
    
    priceSlider.slider();
    
    priceSlider.on('slide', function(slideEvt) {
    	priceSliderValue.text(slideEvt.value);
    });
    
    priceSlider.on('slideStop', function(slideEvt) {
    	priceSliderValue.text(slideEvt.value);
    });
</script>