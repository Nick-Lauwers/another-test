<!--complete-->

<%= form_for([@vehicle, @vehicle.reviews.new]) do |f| %>

  <%= render 'shared/error_messages', object: f.object %>

  <div class="row review-item">
    
    <div class="col-xs-4">
      <div class="row">
        
        <div class="col-xs-3">
          <!--intentionally left empty-->
        </div>
        
        <div class="col-xs-9 review-author vertical-align">
          
          <div class="author-avatar">
            <%= image_tag @vehicle.user.profile.avatar.url %>
          </div>
          
          <span class="author-name"><%= current_user.name %></span>
        </div>
      </div>
    </div>
    
    <div class="col-xs-8">
      <div class="review-container">
        
        <div class="review-rating">
          <div id="stars"></div>
        </div>
        
        <%= f.text_field :title, 
            placeholder: "Review title", 
            class: "form-control review-title-form-control" %>
        
        <span class="review-date">
          <%= Time.now.strftime("%D") %>
        </span>
        
        <%= f.text_area :comment, 
            rows: 3,
            placeholder: "Review comments", 
            class: "form-control review-comment-form-control" %>
        
        <%= f.hidden_field :vehicle_id, value: @vehicle.id %>
  
        <div class="review-post-container">
          <%= f.submit "Post my review", class: "review-post" %>
        </div>
      </div>
    </div>
  </div>
<% end %>

<script type="text/javascript">
  $(document).ready(function() {
    
    // stars
    var stars = $('#stars');
  
    stars.raty({
      path:      '/assets'
      scoreName: 'review[rating]'
    });
  })
</script>

<!--apply ajax-->
<!--reviews code is in both form and in vehicle show-->